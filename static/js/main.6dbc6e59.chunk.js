(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{102:function(e,t,n){},103:function(e,t,n){"use strict";n.r(t);var a,s=n(0),o=n.n(s),c=n(23),l=n.n(c),i=(n(50),n(4)),r=n(5),u=n(7),m=n(6),d=n(8),h=(n(51),n(9)),g=n(11),p=n.n(g),f=(n(78),n(79),o.a.createContext(),function(e){function t(e){var n;return Object(i.a)(this,t),(n=Object(u.a)(this,Object(m.a)(t).call(this,e))).componentWillMount=function(){(a=p()("http://127.0.0.1:3001")).on("connected",(function(e){console.log("Connecting..."),n.setState({displayData:[].concat(Object(h.a)(n.state.displayData),[o.a.createElement("div",null,e.time+" - "+e.username+": "+e.text+" ")])})})),a.on("chat message",(function(e){var t;console.log("adding message: "+e),n.setState({displayData:[].concat(Object(h.a)(n.state.displayData),[o.a.createElement("div",null,e.time+" - "+e.username+": "+e.text+" ")])}),(t=console).log.apply(t,Object(h.a)(n.state.displayData))})),a.on("No login",(function(e){var t;console.log("adding message: "+e),n.setState({displayData:[].concat(Object(h.a)(n.state.displayData),[o.a.createElement("div",null,e.time+" - "+e.username+": "+e.text+" ")])}),(t=console).log.apply(t,Object(h.a)(n.state.displayData))}))},n.giveId=function(e){return"".concat(e,"_").concat((new Date).getTime())},n.componentWillUnmount=function(){n.setState({displayData:[]}),n.setState({message:""}),n.setState({id:0})},n.handleChange=function(e){n.setState({message:e.target.value})},n.handleKeyPress=function(e){"Enter"===e.key&&(""==n.props.getUsername?(a.emit("chat message",n.state.message,""),n.setState({message:""})):(a.emit("chat message",n.state.message,n.props.getUsername),n.setState({message:""})))},n.handleClick=function(e){""==n.props.getUsername?(a.emit("chat message",n.state.message,""),n.setState({message:""})):(a.emit("chat message",n.state.message,n.props.getUsername),n.setState({message:""}))},n.state={displayData:[],message:"",id:0,count:0},n}return Object(d.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){return o.a.createElement("div",{className:"chatBox-container"},o.a.createElement("div",{className:"chatBox"},this.state.displayData),o.a.createElement("div",{className:"chatInputBox"},o.a.createElement("input",{className:"chatInput",type:"text",placeholder:"Type here",value:this.state.message,onChange:this.handleChange,onKeyPress:this.handleKeyPress})))}}]),t}(s.Component)),v=(n(80),n(81),function(e){var t=e.handleClose,n=e.modalType,a=e.submitRegister,s=e.submitLogin,c=e.show,l=e.children,i=c?"modal display-block":"modal display-none",r=n?"Login":"Register",u=n?s:a;return o.a.createElement("div",{className:i},o.a.createElement("section",{className:"modal-main"},o.a.createElement("h1",null," ",r," "),o.a.createElement("span",{className:"close",onClick:t}," \xd7 "),l,o.a.createElement("button",{className:"modal-submit",onClick:u},"submit")))}),E=(n(82),n(16)),k=n.n(E),b=n(12),y=n.n(b),w=(n(102),function(){var e=Object(s.useRef)(null),t=Object(s.useRef)(null),n=Object(s.useRef)();return Object(s.useEffect)((function(){var a=e.current,s=t.current,o=a.getContext("2d"),c=document.getElementsByClassName("color");console.log(c,"the colors"),console.log(s);for(var l={color:"black"},i=function(e){l.color=e.target.className.split(" ")[1]},r=0;r<c.length;r++)c[r].addEventListener("click",i,!1);var u=!1,m=function(e,t,s,c,l,i){if(o.beginPath(),o.moveTo(e,t),o.lineTo(s,c),o.strokeStyle=l,o.lineWidth=2,o.stroke(),o.closePath(),i){var r=a.width,u=a.height;n.current.emit("drawing",{x0:e/r,y0:t/u,x1:s/r,y1:c/u,color:l})}},d=function(e){u=!0,a.canvasBounds=a.getBoundingClientRect(),l.x=(e.clientX||e.touches[0].clientX)-a.canvasBounds.left,l.y=(e.clientY||e.touches[0].clientY)-a.canvasBounds.top},h=function(e){if(u){var t=a.canvasBounds.left,n=a.canvasBounds.top;m(l.x,l.y,(e.clientX||e.touches[0].clientX)-t,(e.clientY||e.touches[0].clientY)-n,l.color,!0),l.x=(e.clientX||e.touches[0].clientX)-t,l.y=(e.clientY||e.touches[0].clientY)-n}},g=function(e){if(u){u=!1;var t=a.canvasBounds.left,n=a.canvasBounds.top;m(l.x,l.y,(e.clientX||e.touches[0].clientX)-t,(e.clientY||e.touches[0].clientY)-n,l.color,!0)}},f=function(e,t){var n=(new Date).getTime();return function(){var a=(new Date).getTime();a-n>=t&&(n=a,e.apply(null,arguments))}};a.addEventListener("mousedown",d,!1),a.addEventListener("mouseup",g,!1),a.addEventListener("mouseout",g,!1),a.addEventListener("mousemove",f(h,10),!1),a.addEventListener("touchstart",d,!1),a.addEventListener("touchend",g,!1),a.addEventListener("touchcancel",g,!1),a.addEventListener("touchmove",f(h,10),!1);var v=function(){var e=a.getBoundingClientRect(),t=e.width,n=e.height;a.width===t&&a.height===n||(a.width=t,a.height=n)};window.addEventListener("resize",v,!1),v();n.current=p()("http://127.0.0.1:3001"),n.current.on("drawing",(function(e){var t=a.width,n=a.height;m(e.x0*t,e.y0*n,e.x1*t,e.y1*n,e.color)}))}),[]),o.a.createElement("div",{className:"drawing-container"},o.a.createElement("canvas",{ref:e,className:"canvas"}),o.a.createElement("section",{ref:t,className:"colors"},o.a.createElement("div",{className:"color black"}),o.a.createElement("div",{className:"color red"}),o.a.createElement("div",{className:"color green"}),o.a.createElement("div",{className:"color blue"}),o.a.createElement("div",{className:"color yellow"}),o.a.createElement("div",{className:"color purple"})))}),S=function(e){function t(e){var n;return Object(i.a)(this,t),(n=Object(u.a)(this,Object(m.a)(t).call(this,e))).showModalLogin=function(){n.setState({show:!0,modalType:!0})},n.showModalRegister=function(){n.setState({show:!0,modalType:!1})},n.hideModal=function(){n.setState({show:!1})},n.handleSubmitLogin=function(e){e.preventDefault();var t={username:n.state.username,password:n.state.password};k.a.post("http://localhost:3001/api/users/login",t).then((function(e){console.log("login response: "),console.log(e.data.token),console.log(y()(e.data.token).username),n.props.setToken(e.data.token),n.props.setUsername(y()(e.data.token).username),console.log("almost connected"),n.setState({show:!1})})).catch((function(e){console.log(e.response)}))},n.handleSubmitRegister=function(e){e.preventDefault();var t={username:n.state.username,password:n.state.password};console.log(t.username),console.log(t.password),k.a.post("http://localhost:3001/api/users/register",t).then((function(e){console.log(e),console.log(e.data),n.setState({show:!1}),k.a.post("http://localhost:3001/api/users/login",t).then((function(e){console.log("login response: "),console.log(e.data.token),console.log(y()(e.data.token).username),n.props.setToken(e.data.token),n.props.setUsername(y()(e.data.token).username),console.log("almost connected"),n.setState({show:!1})})).catch((function(e){console.log(e.response)}))})).catch((function(e){console.log(e.response)}))},n.onEnter=function(e){"Enter"===e.key&&(!0===n.state.modalType?n.handleSubmitLogin(e):n.handleSubmitRegister(e))},n.handleUsernameChange=function(e){n.setState({username:e.target.value})},n.handlePasswordChange=function(e){n.setState({password:e.target.value})},n.showLoginAndRegister=function(){console.log("token: "+n.props.getTokenStatus())},n.logout=function(){n.props.deleteToken()},n.state={currentUsername:"",currentUserId:"",show:!1,modalType:!0,username:"",password:""},n}return Object(d.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e=this;return o.a.createElement("main",null,o.a.createElement(v,{ref:function(t){return e.node=t},show:this.state.show,submitRegister:this.handleSubmitRegister,submitLogin:this.handleSubmitLogin,onEnter:this.onEnter,modalType:this.state.modalType,handleClose:this.hideModal},o.a.createElement("input",{className:"input-username",type:"text",value:this.username,onChange:this.handleUsernameChange,onKeyPress:this.onEnter}),o.a.createElement("input",{className:"input-password",type:"text",value:this.state.password,onChange:this.handlePasswordChange,onKeyPress:this.onEnter})),this.props.getTokenStatus()?o.a.createElement("div",null,o.a.createElement("div",{className:"username"},this.props.getUsername()),o.a.createElement("div",{className:"logout",onClick:this.logout},"Logout")):o.a.createElement("div",null,o.a.createElement("button",{className:"button-login",type:"button",onClick:function(){return e.showModalLogin()}},"Login"),o.a.createElement("button",{className:"button-register",type:"button",onClick:function(){return e.showModalRegister()}},"Register")),o.a.createElement(w,null),o.a.createElement(f,{getUsername:this.props.getUsername()}))}}]),t}(s.Component),T=function(e){function t(e){var n;return Object(i.a)(this,t),(n=Object(u.a)(this,Object(m.a)(t).call(this,e))).setUsername=function(e){n.setState({username:e})},n.getUsername=function(){return n.state.username},n.setToken=function(e){n.setState({token:e,tokenStatus:!0}),console.log("jwt: "+n.state.token)},n.getToken=function(){return n.state.token},n.getTokenStatus=function(){return n.state.tokenStatus},n.deleteToken=function(){n.setState({token:"",tokenStatus:!1}),console.log("loggin out")},n.state={username:"",redirectTo:"/Dashboard",token:"",tokenStatus:!1},n}return Object(d.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){return o.a.createElement("div",{className:"App",id:"darkmode"},o.a.createElement("h1",{className:"Title"},"Chat"),o.a.createElement(S,{setUsername:this.setUsername,getUsername:this.getUsername,setToken:this.setToken,getToken:this.getToken,getTokenStatus:this.getTokenStatus,deleteToken:this.deleteToken}))}}]),t}(s.Component);l.a.render(o.a.createElement(T,null),document.getElementById("root"))},45:function(e,t,n){e.exports=n(103)},50:function(e,t,n){},51:function(e,t,n){},75:function(e,t){},79:function(e,t,n){},80:function(e,t,n){},81:function(e,t,n){},82:function(e,t,n){}},[[45,1,2]]]);
//# sourceMappingURL=main.6dbc6e59.chunk.js.map